<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #000000; color: #FFFFFF; }
        section { margin-bottom: 40px; }
        .feed-container { border: 1px solid #FFFFFF; padding: 10px; margin: 10px 0; height: 400px; overflow-y: auto; background: #111111; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .tile { border: 1px solid #FFFFFF; padding: 10px; background: #333333; }
        .tile img { width: 50px; height: 50px; border-radius: 50%; display: block; margin: 0 auto 10px; }
        iframe { width: 100%; height: 400px; }
        h1, h2, h3, h4 { color: #FFFFFF; }
        a { color: #D3D3D3; }
        p { color: #FFFFFF; }
        .span-two { grid-column: span 2; }
    </style>
</head>
<body>
    <h1>Monitoring Dashboard</h1>
    
    <section id="x-feeds">
        <h2>X Feeds (via RSS)</h2>
        <div class="grid">
            <div class="tile">
                <img src="https://pbs.twimg.com/profile_images/918571742181568512/1LgkB7ua_400x400.jpg" alt="VicEmergency logo">
                <h4>VicEmergency (@vicemergency)</h4>
                <div id="vicemergency-feed" class="feed-container"></div>
            </div>
            <div class="tile">
                <img src="https://pbs.twimg.com/profile_images/1353996799834632193/R27JeevD_400x400.jpg" alt="BOM_au logo">
                <h4>Bureau of Meteorology (@BOM_au)</h4>
                <div id="bom-au-feed" class="feed-container"></div>
            </div>
            <div class="tile">
                <img src="https://pbs.twimg.com/profile_images/1150718511113129984/7Adgo6B4_400x400.jpg" alt="BBCBreaking logo">
                <h4>BBC Breaking News (@BBCBreaking)</h4>
                <div id="bbcbreaking-feed" class="feed-container"></div>
            </div>
            <div class="tile">
                <img src="https://pbs.twimg.com/profile_images/1194751943877791744/poza4IZp_400x400.jpg" alt="Reuters logo">
                <h4>Reuters (@Reuters)</h4>
                <div id="reuters-feed" class="feed-container"></div>
            </div>
            <div class="tile">
                <img src="https://pbs.twimg.com/profile_images/1098244578472280064/gjkVMelR_400x400.png" alt="nytimes logo">
                <h4>The New York Times (@nytimes)</h4>
                <div id="nytimes-feed" class="feed-container"></div>
            </div>
            <div class="tile">
                <img src="https://pbs.twimg.com/profile_images/925742452901625856/j0hrpQv4_400x400.jpg" alt="cnnbrk logo">
                <h4>CNN Breaking News (@cnnbrk)</h4>
                <div id="cnnbrk-feed" class="feed-container"></div>
            </div>
            <div class="tile">
                <img src="https://pbs.twimg.com/profile_images/508871804624896004/yQ2ZxcrA_400x400.png" alt="AP logo">
                <h4>Associated Press (@AP)</h4>
                <div id="ap-feed" class="feed-container"></div>
            </div>
        </div>
    </section>

    <section id="additional-feeds">
        <h2>Additional Data Feeds</h2>
        <div class="grid">
            <div class="tile">
                <h4>Recent Earthquakes (M4.5+)</h4>
                <div id="earthquakes" class="feed-container"></div>
            </div>
            <div class="tile">
                <h4>Crypto Prices</h4>
                <div id="crypto-prices" class="feed-container"></div>
            </div>
            <div class="tile">
                <h4>Politics News</h4>
                <div id="politics-news" class="feed-container"></div>
            </div>
            <div class="tile">
                <h4>Technology News</h4>
                <div id="tech-news" class="feed-container"></div>
            </div>
            <div class="tile">
                <h4>Economic News</h4>
                <div id="economic-news" class="feed-container"></div>
            </div>
            <div class="tile">
                <h4>Breaking News & Unfolding Events</h4>
                <div id="breaking-news" class="feed-container"></div>
            </div>
            <div class="tile">
                <h4>Geopolitical Events</h4>
                <div id="geopolitical-news" class="feed-container"></div>
            </div>
            <div class="tile">
                <h4>Australian Bushfire Feed (NSW RFS)</h4>
                <div id="bushfire-feed" class="feed-container"></div>
            </div>
        </div>
    </section>

    <section id="embedded-feeds">
        <h2>Embedded Live Feeds</h2>
        <div class="grid">
            <div class="tile span-two">
                <h4>VicEmergency Interactive Map</h4>
                <iframe src="https://emergency.vic.gov.au/" height="400" width="100%" frameborder="0"></iframe>
                <p>Note: If the embed doesn't load due to site restrictions, visit <a href="https://emergency.vic.gov.au/" target="_blank">VicEmergency</a> directly.</p>
            </div>
            <div class="tile span-two">
                <h4>Australian Wide Weather Map (The Weather Chaser)</h4>
                <iframe src="https://theweatherchaser.com/map" height="400" width="100%" frameborder="0"></iframe>
                <p>Note: If the embed doesn't load due to site restrictions, visit <a href="https://theweatherchaser.com/map" target="_blank">The Weather Chaser Map</a> directly.</p>
            </div>
        </div>
    </section>
    
    <script>
        function loadRSS(url, containerId) {
            const proxy = 'https://api.allorigins.win/get?url=' + encodeURIComponent(url);
            fetch(proxy)
                .then(response => response.json())
                .then(data => {
                    const parser = new DOMParser();
                    const xml = parser.parseFromString(data.contents, 'text/xml');
                    const items = xml.querySelectorAll('item');
                    let html = '';
                    items.forEach(item => {
                        const title = item.querySelector('title')?.textContent || '';
                        const link = item.querySelector('link')?.textContent || '';
                        const desc = item.querySelector('description')?.textContent || '';
                        const pubDate = item.querySelector('pubDate')?.textContent || '';
                        const dateAEST = new Date(pubDate).toLocaleString('en-AU', { timeZone: 'Australia/Sydney' });
                        html += `<div><h3><a href="${link}" target="_blank">${title}</a></h3><p>${desc}</p><small>${dateAEST} AEST</small></div><hr>`;
                    });
                    document.getElementById(containerId).innerHTML = html || '<p>No recent items.</p>';
                })
                .catch(error => {
                    console.error(error);
                    document.getElementById(containerId).innerHTML = '<p>Error loading feed.</p>';
                });
        }

        function loadEarthquakes() {
            fetch('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_day.geojson')
                .then(response => response.json())
                .then(data => {
                    let html = '';
                    data.features.forEach(feature => {
                        const props = feature.properties;
                        const timeAEST = new Date(props.time).toLocaleString('en-AU', { timeZone: 'Australia/Sydney' });
                        html += `<div><h3>${props.title}</h3><p>Magnitude: ${props.mag}, Time: ${timeAEST} AEST</p><a href="${props.url}" target="_blank">Details</a><hr></div>`;
                    });
                    document.getElementById('earthquakes').innerHTML = html || '<p>No recent earthquakes.</p>';
                })
                .catch(error => {
                    document.getElementById('earthquakes').innerHTML = '<p>Error loading data.</p>';
                });
        }

        function loadCryptoPrices() {
            fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,solana&vs_currencies=usd&include_24hr_change=true')
                .then(response => response.json())
                .then(data => {
                    let html = '';
                    const nowAEST = new Date().toLocaleString('en-AU', { timeZone: 'Australia/Sydney' });
                    for (const [coin, info] of Object.entries(data)) {
                        html += `<div><h3>${coin.toUpperCase()}</h3><p>Price: $${info.usd}, Change: ${info.usd_24h_change.toFixed(2)}%</p><small>Updated: ${nowAEST} AEST</small><hr></div>`;
                    });
                    document.getElementById('crypto-prices').innerHTML = html || '<p>No data.</p>';
                })
                .catch(error => {
                    document.getElementById('crypto-prices').innerHTML = '<p>Error loading data.</p>';
                });
        }

        function loadGDELTNews(query, containerId) {
            const url = `https://api.gdeltproject.org/api/v2/doc/doc?query=${encodeURIComponent(query)}&mode=artlist&maxrecords=10&format=json&sort=date&lang=english`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    let html = '';
                    data.articles.forEach(article => {
                        const dateAEST = new Date(article.seendate).toLocaleString('en-AU', { timeZone: 'Australia/Sydney' });
                        html += `<div><h3><a href="${article.url}" target="_blank">${article.title}</a></h3><p>${dateAEST} AEST</p><hr></div>`;
                    });
                    document.getElementById(containerId).innerHTML = html || '<p>No recent articles.</p>';
                })
                .catch(error => {
                    document.getElementById(containerId).innerHTML = '<p>Error loading data.</p>';
                });
        }

        // Load feeds on page load and refresh every 5 minutes
        function refreshFeeds() {
            loadRSS('https://openrss.org/twitter.com/vicemergency', 'vicemergency-feed');
            loadRSS('https://openrss.org/twitter.com/BOM_au', 'bom-au-feed');
            loadRSS('https://openrss.org/twitter.com/BBCBreaking', 'bbcbreaking-feed');
            loadRSS('https://openrss.org/twitter.com/Reuters', 'reuters-feed');
            loadRSS('https://openrss.org/twitter.com/nytimes', 'nytimes-feed');
            loadRSS('https://openrss.org/twitter.com/cnnbrk', 'cnnbrk-feed');
            loadRSS('https://openrss.org/twitter.com/AP', 'ap-feed');
            loadRSS('https://www.rfs.nsw.gov.au/feeds/majorIncidents.xml', 'bushfire-feed');
            loadEarthquakes();
            loadCryptoPrices();
            loadGDELTNews('(politics OR government OR congress)', 'politics-news');
            loadGDELTNews('(technology OR AI OR innovation)', 'tech-news');
            loadGDELTNews('(economy OR finance OR markets)', 'economic-news');
            loadGDELTNews('(breaking news OR crisis OR unfolding events)', 'breaking-news');
            loadGDELTNews('(geopolitics OR conflict OR international crisis)', 'geopolitical-news');
        }

        window.onload = refreshFeeds;
        setInterval(refreshFeeds, 300000); // 5 minutes
    </script>
</body>
</html>
